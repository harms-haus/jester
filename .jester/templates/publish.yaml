

# Publish Template for Publish Agent
# This template is used by the Publish agent for story publishing operations

publish_id: "{{PUBLISH_ID}}"
publish_type: "{{PUBLISH_TYPE}}"  # "story", "entity", "batch"
created_at: "{{CREATED_AT}}"
last_modified: "{{LAST_MODIFIED}}"
published_at: "{{PUBLISHED_AT}}"

# Publish target
target:
  story_id: "{{STORY_ID}}"
  story_name: "{{STORY_NAME}}"
  source_universe: "{{SOURCE_UNIVERSE}}"  # "reading"
  target_universe: "{{TARGET_UNIVERSE}}"  # "universe"
  file_path: "{{FILE_PATH}}"
  version: "{{VERSION}}"

# Publish configuration
configuration:
  include_entities: {{INCLUDE_ENTITIES}}  # true/false
  apply_patches: {{APPLY_PATCHES}}  # true/false
  validate_links: {{VALIDATE_LINKS}}  # true/false
  cleanup_source: {{CLEANUP_SOURCE}}  # true/false
  create_backup: {{CREATE_BACKUP}}  # true/false

# Publish workflow
workflow:
  current_stage: "{{CURRENT_STAGE}}"  # "validation", "patch_application", "publishing", "cleanup", "complete"
  next_stage: "{{NEXT_STAGE}}"
  workflow_status: "{{WORKFLOW_STATUS}}"  # "running", "paused", "completed", "failed"
  stage_progress: {{STAGE_PROGRESS}}  # 0-100

# Publish validation
validation:
  pre_publish_checks:
    - check: "{{CHECK_NAME}}"
      status: "{{CHECK_STATUS}}"  # "pass", "fail", "warning", "info"
      message: "{{CHECK_MESSAGE}}"
      severity: "{{SEVERITY}}"  # "critical", "high", "medium", "low"
      auto_fixable: {{AUTO_FIXABLE}}  # true/false
  content_validation:
    - check: "{{CHECK_NAME}}"
      status: "{{CHECK_STATUS}}"
      message: "{{CHECK_MESSAGE}}"
      severity: "{{SEVERITY}}"
      auto_fixable: {{AUTO_FIXABLE}}
  link_validation:
    - check: "{{CHECK_NAME}}"
      status: "{{CHECK_STATUS}}"
      message: "{{CHECK_MESSAGE}}"
      severity: "{{SEVERITY}}"
      auto_fixable: {{AUTO_FIXABLE}}

# Publish results
results:
  overall_status: "{{OVERALL_STATUS}}"  # "published", "failed", "partial", "requires_changes"
  total_entities: {{TOTAL_ENTITIES}}
  published_entities: {{PUBLISHED_ENTITIES}}
  failed_entities: {{FAILED_ENTITIES}}
  patches_applied: {{PATCHES_APPLIED}}
  patches_failed: {{PATCHES_FAILED}}
  success_rate: {{SUCCESS_RATE}}  # 0.0-1.0

# Published content
published_content:
  story:
    name: "{{STORY_NAME}}"
    file_path: "{{STORY_FILE_PATH}}"
    status: "{{STORY_STATUS}}"
    validation_notes: "{{STORY_VALIDATION_NOTES}}"
  entities:
    characters:
      - name: "{{CHARACTER_NAME}}"
        file_path: "{{CHARACTER_FILE_PATH}}"
        status: "{{CHARACTER_STATUS}}"
        validation_notes: "{{CHARACTER_VALIDATION_NOTES}}"
    locations:
      - name: "{{LOCATION_NAME}}"
        file_path: "{{LOCATION_FILE_PATH}}"
        status: "{{LOCATION_STATUS}}"
        validation_notes: "{{LOCATION_VALIDATION_NOTES}}"
    items:
      - name: "{{ITEM_NAME}}"
        file_path: "{{ITEM_FILE_PATH}}"
        status: "{{ITEM_STATUS}}"
        validation_notes: "{{ITEM_VALIDATION_NOTES}}"

# Patch application
patch_application:
  patches_available: {{PATCHES_AVAILABLE}}  # true/false
  patches_applied: {{PATCHES_APPLIED}}
  patches_failed: {{PATCHES_FAILED}}
  patch_results:
    - patch_id: "{{PATCH_ID}}"
      status: "{{PATCH_STATUS}}"
      message: "{{PATCH_MESSAGE}}"
      applied_at: "{{PATCH_APPLIED_AT}}"

# Publish issues
issues:
  critical_issues: ["{{ISSUE_1}}", "{{ISSUE_2}}"]
  high_priority_issues: ["{{ISSUE_1}}", "{{ISSUE_2}}"]
  medium_priority_issues: ["{{ISSUE_1}}", "{{ISSUE_2}}"]
  low_priority_issues: ["{{ISSUE_1}}", "{{ISSUE_2}}"]
  auto_fixable_issues: ["{{ISSUE_1}}", "{{ISSUE_2}}"]
  manual_fix_required: ["{{ISSUE_1}}", "{{ISSUE_2}}"]

# Publish performance
performance:
  start_time: "{{START_TIME}}"
  end_time: "{{END_TIME}}"
  duration: "{{DURATION}}"
  validation_time: "{{VALIDATION_TIME}}"
  patch_time: "{{PATCH_TIME}}"
  publish_time: "{{PUBLISH_TIME}}"
  cleanup_time: "{{CLEANUP_TIME}}"

# Publish metadata
metadata:
  publisher: "{{PUBLISHER}}"
  publish_reason: "{{PUBLISH_REASON}}"
  publish_notes: "{{PUBLISH_NOTES}}"
  quality_score: {{QUALITY_SCORE}}  # 0.0-1.0
  completeness_score: {{COMPLETENESS_SCORE}}  # 0.0-1.0

# Publish completion
completion:
  publish_successful: {{PUBLISH_SUCCESSFUL}}  # true/false
  content_published: {{CONTENT_PUBLISHED}}  # true/false
  ready_for_use: {{READY_FOR_USE}}  # true/false
  cleanup_completed: {{CLEANUP_COMPLETED}}  # true/false
  follow_up_required: {{FOLLOW_UP_REQUIRED}}  # true/false
  next_steps: ["{{STEP_1}}", "{{STEP_2}}"]
